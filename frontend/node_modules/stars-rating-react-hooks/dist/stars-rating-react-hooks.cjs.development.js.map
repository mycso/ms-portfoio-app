{"version":3,"file":"stars-rating-react-hooks.cjs.development.js","sources":["../src/core/useStars.ts","../node_modules/style-inject/dist/style-inject.es.js","../src/component/StarsRating.tsx"],"sourcesContent":["import React, { HtmlHTMLAttributes } from 'react';\nimport { Config, Renderable } from './types';\n\nconst callAllFns = (...fns: any[]) => (...args: any) =>\n  fns.forEach(fn => fn && fn(...args));\n\nexport function useStars(config: Config, isDisabled: boolean = false) {\n  const {\n    totalStars,\n    initialSelectedValue = 0,\n    renderFull,\n    renderHalf = null,\n    renderEmpty,\n  } = config;\n\n  const [selectedValue, setSelectedValue]: [\n    Renderable,\n    React.Dispatch<any>\n  ] = React.useState(initialSelectedValue);\n\n  const [selectingValue, setSelecting]: [\n    Renderable,\n    React.Dispatch<any>\n  ] = React.useState(initialSelectedValue);\n\n  const [isSelecting, setisSelecting]: [\n    boolean,\n    React.Dispatch<any>\n  ] = React.useState(false);\n\n  const onClick = () => {\n    if (isDisabled) return;\n    setSelectedValue(selectingValue);\n  };\n\n  const onMouseEnter = () => {\n    if (isDisabled) return;\n    setisSelecting(true);\n  };\n\n  const onMouseLeave = () => {\n    if (isDisabled) return;\n    setSelecting(selectedValue);\n    setisSelecting(false);\n  };\n\n  const onMouseMove = (e: any, index: number) => {\n    if (isDisabled) return;\n    const rect = e.target.getBoundingClientRect();\n    const xmiddleRelativePosistion = e.pageX - e.target.offsetLeft;\n    if (renderHalf !== null && rect.width / 2 <= xmiddleRelativePosistion) {\n      setSelecting(index + 0.5);\n    } else {\n      setSelecting(index);\n    }\n  };\n\n  const stars: Array<Renderable> = Array.from(\n    Array(totalStars),\n    (_, i: number) => {\n      const shouldRenderHalf = renderHalf !== null ? true : false;\n      let sindex = shouldRenderHalf ? i + 0.5 : i + 1;\n\n      const isSelected = sindex <= selectingValue;\n      const isHalf =\n        !Number.isInteger(selectingValue) && sindex === selectingValue;\n\n      const render = isSelected\n        ? isHalf\n          ? renderHalf\n          : renderFull\n        : renderEmpty;\n\n      return render;\n    }\n  );\n\n  function getStarProps(index: number, elementProps?: any) {\n    const shouldRenderHalf = renderHalf !== null ? true : false;\n    let i = shouldRenderHalf ? index + 0.5 : index + 1;\n    return {\n      ...elementProps,\n      onClick: (e: any) =>\n        callAllFns(\n          onClick(),\n          elementProps && elementProps.onClick(e, selectingValue)\n        ),\n      onMouseMove: (e: any) =>\n        callAllFns(\n          onMouseMove(e, i),\n          elementProps &&\n            elementProps.onMouseMove &&\n            elementProps.onMouseMove(e, i)\n        ),\n    };\n  }\n\n  function getStarWrapperProps(elementProps?: HtmlHTMLAttributes<Element>) {\n    return {\n      ...elementProps,\n      onMouseLeave: callAllFns(\n        elementProps && elementProps.onMouseLeave,\n        onMouseLeave\n      ),\n      onMouseEnter: callAllFns(\n        elementProps && elementProps.onMouseEnter,\n        onMouseEnter\n      ),\n    };\n  }\n\n  return {\n    getStarProps,\n    stars,\n    getStarWrapperProps,\n    isSelecting,\n    selectedValue,\n    selectingValue,\n  };\n}\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import * as React from 'react';\nimport { StarRatingProps } from '../core/types';\nimport { useStars } from '../core/useStars';\nimport styles from './styles/StarRating.module.css';\n\nexport const StarsRating: Function = (props: StarRatingProps) => {\n  const { isDisabled = false } = props;\n  const instance: any = useStars(props.config, isDisabled);\n  const {\n    stars,\n    getStarProps,\n    getStarWrapperProps,\n    isSelecting,\n    selectingValue,\n    selectedValue,\n  } = instance;\n\n  const isMountRef = React.useRef(false);\n\n  React.useEffect(() => {\n    if (props && props.onSelecting && props?.onSelecting) {\n      props.onSelecting(isSelecting, selectingValue);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isSelecting, selectingValue]);\n\n  React.useEffect(() => {\n    if (isMountRef.current === true && props?.onStarsRated) {\n      props.onStarsRated(selectedValue);\n    }\n    isMountRef.current = true;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedValue]);\n\n  return (\n    <>\n      <div>\n        <span tabIndex={0} {...getStarWrapperProps()} className={styles.stars}>\n          {stars?.map((e: any, i: number) => (\n            <span key={i} {...getStarProps(i)} className={styles.star}>\n              {e}\n            </span>\n          ))}\n        </span>\n      </div>\n    </>\n  );\n};\n"],"names":["callAllFns","fns","args","forEach","fn","useStars","config","isDisabled","totalStars","initialSelectedValue","renderFull","renderHalf","renderEmpty","React","useState","selectedValue","setSelectedValue","selectingValue","setSelecting","isSelecting","setisSelecting","onClick","onMouseEnter","onMouseLeave","onMouseMove","e","index","rect","target","getBoundingClientRect","xmiddleRelativePosistion","pageX","offsetLeft","width","stars","Array","from","_","i","shouldRenderHalf","sindex","isSelected","isHalf","Number","isInteger","render","getStarProps","elementProps","getStarWrapperProps","StarsRating","props","instance","isMountRef","onSelecting","current","onStarsRated","tabIndex","className","styles","map","key","star"],"mappings":"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"}